import{fV as n,cU as t,cK as r,al as e,b9 as i,gp as l,cJ as o,cs as u,gN as a,cp as s}from"./vendor.d0a39f0f.js";import{w as c,z as f,k as g,$ as h,b as d,J as w,n as m,x as A,A as p,F as y,G as E,H as I,K as F,Q as R,U as b,g as x,V as N,X as S,_ as j,a0 as M,a1 as O}from"./arcadeUtils.5b619627.js";import{S as Z,g as k,A as v,w as z,x as J,p as P,O as L,d as U,h as V,j as C,k as K,R as T,E as W,l as q,y as G,W as H,K as Q,F as X,M as _,m as B,P as D,U as Y,G as $,V as nn,b as tn,I as rn,q as en,J as ln,v as on}from"./geometryEngineAsync.aca6f819.js";import"./number.65ee9777.js";import"./FeatureSetReader.3c31cb94.js";import"./centroid.1404a86d.js";function un(n){return 0===l.indexOf("4.")?i.fromExtent(n):new i({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}function an(t){if(f(t,2,2),t[0]instanceof n&&t[1]instanceof n);else if(t[0]instanceof n&&null===t[1]);else if(t[1]instanceof n&&null===t[0]);else if(null!==t[0]||null!==t[1])throw new Error("Illegal Argument")}function sn(n,t){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return a(0);let e=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(e=M(n.spatialReference)/s(n.spatialReference));let i=0;if("polyline"===n.type)for(const r of n.paths)for(let n=1;n<r.length;n++)i+=O(r[n],r[n-1],e);else if("polygon"===n.type)for(const r of n.rings){for(let n=1;n<r.length;n++)i+=O(r[n],r[n-1],e);(r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1]||void 0!==r[0][2]&&r[0][2]!==r[r.length-1][2])&&(i+=O(r[0],r[r.length-1],e))}else"extent"===n.type&&(i+=2*O([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],e),i+=2*O([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],e),i*=2,i+=4*Math.abs(E(n.zmax,0)*e-E(n.zmin,0)*e));const l=new r({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,i]]});return X(l,t)}function cn(l){"async"===l.mode&&(l.functions.disjoint=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null===r[0]||null===r[1]||Z(r[0],r[1])}))},l.functions.intersects=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null!==r[0]&&null!==r[1]&&k(r[0],r[1])}))},l.functions.touches=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null!==r[0]&&null!==r[1]&&v(r[0],r[1])}))},l.functions.crosses=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null!==r[0]&&null!==r[1]&&z(r[0],r[1])}))},l.functions.within=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null!==r[0]&&null!==r[1]&&J(r[0],r[1])}))},l.functions.contains=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null!==r[0]&&null!==r[1]&&P(r[0],r[1])}))},l.functions.overlaps=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null!==r[0]&&null!==r[1]&&L(r[0],r[1])}))},l.functions.equals=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){return f(e,2,2),e[0]===e[1]||(e[0]instanceof n&&e[1]instanceof n?U(e[0],e[1]):!(!g(e[0])||!g(e[1]))&&e[0].getTime()===e[1].getTime())}))},l.functions.relate=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=c(e),f(e,3,3),e[0]instanceof n&&e[1]instanceof n)return V(e[0],e[1],h(e[2]));if(e[0]instanceof n&&null===e[1])return!1;if(e[1]instanceof n&&null===e[0])return!1;if(null===e[0]&&null===e[1])return!1;throw new Error("Illegal Argument")}))},l.functions.intersection=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null===r[0]||null===r[1]?null:C(r[0],r[1])}))},l.functions.union=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){const l=[];if(0===(i=c(i)).length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if(d(i[0])){const t=c(i[0]);for(let r=0;r<t.length;r++)if(null!==t[r]){if(!(t[r]instanceof n))throw new Error("Illegal Argument");l.push(t[r])}}else{if(!w(i[0])){if(i[0]instanceof n)return m(A(i[0]),t.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}{const t=c(i[0].toArray());for(let r=0;r<t.length;r++)if(null!==t[r]){if(!(t[r]instanceof n))throw new Error("Illegal Argument");l.push(t[r])}}}else for(let t=0;t<i.length;t++)if(null!==i[t]){if(!(i[t]instanceof n))throw new Error("Illegal Argument");l.push(i[t])}return 0===l.length?null:K(l)}))},l.functions.difference=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null!==r[0]&&null===r[1]?A(r[0]):null===r[0]?null:T(r[0],r[1])}))},l.functions.symmetricdifference=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,r){return an(r=c(r)),null===r[0]&&null===r[1]?null:null===r[0]?A(r[1]):null===r[1]?A(r[0]):W(r[0],r[1])}))},l.functions.clip=function(r,e){return l.standardFunctionAsync(r,e,(function(r,e,i){if(i=c(i),f(i,2,2),!(i[1]instanceof t)&&null!==i[1])throw new Error("Illegal Argument");if(null===i[0])return null;if(!(i[0]instanceof n))throw new Error("Illegal Argument");return null===i[1]?null:q(i[0],i[1])}))},l.functions.cut=function(t,e){return l.standardFunctionAsync(t,e,(function(t,e,i){if(i=c(i),f(i,2,2),!(i[1]instanceof r)&&null!==i[1])throw new Error("Illegal Argument");if(null===i[0])return[];if(!(i[0]instanceof n))throw new Error("Illegal Argument");return null===i[1]?[A(i[0])]:G(i[0],i[1])}))},l.functions.area=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(f(i,1,2),null===(i=c(i))[0])return 0;if(p(i[0]))return i[0].sumArea(y(E(i[1],-1)),!1,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=I(i[0],t.spatialReference);return null===n?0:H(n,y(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return H(i[0],y(E(i[1],-1)))}))},l.functions.areageodetic=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(f(i,1,2),null===(i=c(i))[0])return 0;if(p(i[0]))return i[0].sumArea(y(E(i[1],-1)),!0,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=I(i[0],t.spatialReference);return null===n?0:Q(n,y(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return Q(i[0],y(E(i[1],-1)))}))},l.functions.length=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(f(i,1,2),null===(i=c(i))[0])return 0;if(p(i[0]))return i[0].sumLength(F(E(i[1],-1)),!1,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=R(i[0],t.spatialReference);return null===n?0:X(n,F(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return X(i[0],F(E(i[1],-1)))}))},l.functions.length3d=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(f(i,1,2),null===(i=c(i))[0])return 0;if(d(i[0])||w(i[0])){const n=R(i[0],t.spatialReference);return null===n?0:!0===n.hasZ?sn(n,F(E(i[1],-1))):X(n,F(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return!0===i[0].hasZ?sn(i[0],F(E(i[1],-1))):X(i[0],F(E(i[1],-1)))}))},l.functions.lengthgeodetic=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){if(f(i,1,2),null===(i=c(i))[0])return 0;if(p(i[0]))return i[0].sumLength(F(E(i[1],-1)),!0,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(d(i[0])||w(i[0])){const n=R(i[0],t.spatialReference);return null===n?0:_(n,F(E(i[1],-1)))}if(!(i[0]instanceof n))throw new Error("Illegal Argument");return _(i[0],F(E(i[1],-1)))}))},l.functions.distance=function(t,r){return l.standardFunctionAsync(t,r,(function(r,e,i){i=c(i),f(i,2,3);let l=i[0];(d(i[0])||w(i[0]))&&(l=b(i[0],t.spatialReference));let o=i[1];if((d(i[1])||w(i[1]))&&(o=b(i[1],t.spatialReference)),!(l instanceof n))throw new Error("Illegal Argument");if(!(o instanceof n))throw new Error("Illegal Argument");return B(l,o,F(E(i[2],-1)))}))},l.functions.distancegeodetic=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,i){i=c(i),f(i,2,3);const l=i[0],o=i[1];if(!(l instanceof e))throw new Error("Illegal Argument");if(!(o instanceof e))throw new Error("Illegal Argument");const u=new r({paths:[],spatialReference:l.spatialReference});return u.addPath([l,o]),_(u,F(E(i[2],-1)))}))},l.functions.densify=function(e,o){return l.standardFunctionAsync(e,o,(function(e,l,o){if(o=c(o),f(o,2,3),null===o[0])return null;if(!(o[0]instanceof n))throw new Error("Illegal Argument");const u=x(o[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return o[0]instanceof i||o[0]instanceof r?D(o[0],u,F(E(o[2],-1))):o[0]instanceof t?D(un(o[0]),u,F(E(o[2],-1))):o[0]}))},l.functions.densifygeodetic=function(e,o){return l.standardFunctionAsync(e,o,(function(e,l,o){if(o=c(o),f(o,2,3),null===o[0])return null;if(!(o[0]instanceof n))throw new Error("Illegal Argument");const u=x(o[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return o[0]instanceof i||o[0]instanceof r?Y(o[0],u,F(E(o[2],-1))):o[0]instanceof t?Y(un(o[0]),u,F(E(o[2],-1))):o[0]}))},l.functions.generalize=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=c(e),f(e,2,4),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");const i=x(e[1]);if(isNaN(i))throw new Error("Illegal Argument");return $(e[0],i,N(E(e[2],!0)),F(E(e[3],-1)))}))},l.functions.buffer=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=c(e),f(e,2,3),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");const i=x(e[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?A(e[0]):nn(e[0],i,F(E(e[2],-1)))}))},l.functions.buffergeodetic=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=c(e),f(e,2,3),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");const i=x(e[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?A(e[0]):tn(e[0],i,F(E(e[2],-1)))}))},l.functions.offset=function(n,t){return l.standardFunctionAsync(n,t,(function(n,t,e){if(e=c(e),f(e,2,6),null===e[0])return null;if(!(e[0]instanceof i||e[0]instanceof r))throw new Error("Illegal Argument");const l=x(e[1]);if(isNaN(l))throw new Error("Illegal Argument");const o=x(E(e[4],10));if(isNaN(o))throw new Error("Illegal Argument");const u=x(E(e[5],0));if(isNaN(u))throw new Error("Illegal Argument");return rn(e[0],l,F(E(e[2],-1)),h(E(e[3],"round")).toLowerCase(),o,u)}))},l.functions.rotate=function(r,o){return l.standardFunctionAsync(r,o,(function(r,l,o){o=c(o),f(o,2,3);let u=o[0];if(null===u)return null;if(!(u instanceof n))throw new Error("Illegal Argument");u instanceof t&&(u=i.fromExtent(u));const a=x(o[1]);if(isNaN(a))throw new Error("Illegal Argument");const s=E(o[2],null);if(null===s)return en(u,a);if(s instanceof e)return en(u,a,s);throw new Error("Illegal Argument")}))},l.functions.centroid=function(u,a){return l.standardFunctionAsync(u,a,(function(l,a,s){if(s=c(s),f(s,1,1),null===s[0])return null;let g=s[0];if((d(s[0])||w(s[0]))&&(g=b(s[0],u.spatialReference)),null===g)return null;if(!(g instanceof n))throw new Error("Illegal Argument");return g instanceof e?m(A(s[0]),u.spatialReference):g instanceof i?g.centroid:g instanceof r?S(g):g instanceof o?j(g):g instanceof t?g.center:null}))},l.functions.multiparttosinglepart=function(a,s){return l.standardFunctionAsync(a,s,(function(l,s,g){g=c(g),f(g,1,1);const h=[];if(null===g[0])return null;if(!(g[0]instanceof n))throw new Error("Illegal Argument");return g[0]instanceof e||g[0]instanceof t?[m(A(g[0]),a.spatialReference)]:ln(g[0]).then((n=>{if(n instanceof i){const t=[],r=[];for(let e=0;e<n.rings.length;e++)if(n.isClockwise(n.rings[e])){const r=u({rings:[n.rings[e]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(r)}else r.push({ring:n.rings[e],pt:n.getPoint(e,0)});for(let n=0;n<r.length;n++)for(let e=0;e<t.length;e++)if(t[e].contains(r[n].pt)){t[e].addRing(r[n].ring);break}return t}if(n instanceof r){const t=[];for(let r=0;r<n.paths.length;r++){const e=u({paths:[n.paths[r]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(e)}return t}if(g[0]instanceof o){const n=m(A(g[0]),a.spatialReference);for(let t=0;t<n.points.length;t++)h.push(n.getPoint(t));return h}return null}))}))},l.functions.issimple=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=c(e),f(e,1,1),null===e[0])return!0;if(!(e[0]instanceof n))throw new Error("Illegal Argument");return on(e[0])}))},l.functions.simplify=function(t,r){return l.standardFunctionAsync(t,r,(function(t,r,e){if(e=c(e),f(e,1,1),null===e[0])return null;if(!(e[0]instanceof n))throw new Error("Illegal Argument");return ln(e[0])}))})}export{cn as registerFunctions};
